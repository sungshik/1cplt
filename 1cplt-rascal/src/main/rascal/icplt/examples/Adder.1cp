role @client(
  input: number[],
  sum: number = 0
) {
  main:
    if input.length > 0 then {
      {n1: sum, n2: input[0] ?? 0, c: self} -> @server.req |> {
        resp := req.n1 + req.n2 ;
        resp -> req.c.sum |>
          main
      } ;
      input := input.slice(1)
    }
} 

role @server(req?: {n1: number; n2: number; c: @client}, resp?: number)

process @client[5](input = [5, 6, 7, 8])
process @client[6](input = [1, 2, 3])
process @server()

#analyze
#compile
#execute
