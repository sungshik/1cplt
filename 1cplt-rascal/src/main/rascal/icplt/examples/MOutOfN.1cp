global @prod(ok: boolean)
{
  main:
    self -> @cons.p |>
      if
        ps.length < m
      then
        ps := [p].concat(ps) ;
        true -> p.ok
      else
        false -> p.ok
}

global @cons(p: @prod, ps: @prod[], m: number)

process @prod[1](false)
process @prod[2](false)
process @prod[3](false)
process @cons(@prod[1], [], 2)
//            ^^^^^^^^
//            Dummy initial value
